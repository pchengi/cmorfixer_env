From 5530e96ba71187928571b10e6c8779e2f62ce2e5 Mon Sep 17 00:00:00 2001
From: Prashanth Dwarakanath <pchengi@nsc.liu.se>
Date: Thu, 12 Nov 2020 18:14:54 +0100
Subject: [PATCH] refer to nemo-vertices with path relative to cmor-fixer.py
 instead of pwd.

---
 cmor-fixer.py | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/cmor-fixer.py b/cmor-fixer.py
index fe62b2b..47bea2e 100755
--- a/cmor-fixer.py
+++ b/cmor-fixer.py
@@ -30,7 +30,9 @@ orca025_grid_shape = (1050, 1442, 4)
 
 def load_vertices(vertices_file_name):
     # Loading once at the start the NEMO longitude and latitude vertices from a netcdf file:
-    nemo_vertices_file_name=os.path.join("nemo-vertices", vertices_file_name)
+    scriptdir=os.path.dirname(__file__)
+    nemoverticespath=scriptdir+"/nemo-vertices"
+    nemo_vertices_file_name=os.path.join(nemoverticespath, vertices_file_name)
     if os.path.isfile(nemo_vertices_file_name) == False: print(error_message, ' The netcdf data file ', nemo_vertices_file_name, '  does not exist.\n'); sys.exit()
     nemo_vertices_netcdf_file = netCDF4.Dataset(nemo_vertices_file_name, 'r')
     lon_vertices_from_nemo_tmp = nemo_vertices_netcdf_file.variables["vertices_longitude"]
-- 
2.45.2
